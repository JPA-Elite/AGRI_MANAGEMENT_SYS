import{j as e,u as p,r,x as w,s as x}from"./app-CS5zRdaM.js";import{g as h,v as N}from"./personal-information-thunk-D5ifJ_DE.js";import{S as u}from"./sweetalert2.esm.all-BY1s0Tb6.js";function d({size:s="h-5 w-5",color:l="text-white"}){return e.jsxs("svg",{className:`animate-spin ${s} ${l}`,xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[e.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),e.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}function v({isLoading:s}){return s?e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-gray-900 bg-opacity-50",children:e.jsxs("div",{className:"flex flex-col items-center bg-white p-4 rounded-lg",children:[e.jsx(d,{size:"h-12 w-12",color:"text-green-500"}),e.jsx("span",{className:"mt-2 text-sm font-medium text-gray-700",children:"Loading..."})]})}):null}function C(){var o;const{personal_informations:s}=p(t=>t.personal_information);p(t=>t.app);const[l,c]=r.useState(null),[n,m]=r.useState(!1),[g,f]=r.useState(!0),y=["active","inactive","declined"];r.useEffect(()=>{(async()=>{try{await x.dispatch(h())}finally{f(!1)}})()},[]);const j=async(t,i)=>{c(null),m(!0);try{await x.dispatch(N({...t,status:i})),x.dispatch(h()),await u.fire({title:"Success!",text:`Status updated successfully to ${i}`,icon:"success",showConfirmButton:!1,timer:1500})}catch(a){console.error("Error updating status:",a),await u.fire({title:"Error!",text:"Failed to update status",icon:"error",showConfirmButton:!0})}finally{m(!1)}};return g?e.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[e.jsx(d,{size:"h-8 w-8",color:"text-green-500"}),e.jsx("span",{className:"ml-2",children:"Loading..."})]}):e.jsxs(e.Fragment,{children:[e.jsx(v,{isLoading:n}),e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8 mt-8",children:[e.jsxs("div",{className:"sm:flex sm:items-center",children:[e.jsxs("div",{className:"sm:flex-auto",children:[e.jsx("h1",{className:"text-base font-semibold text-gray-900",children:"Active Beneficiary"}),e.jsx("p",{className:"mt-2 text-sm text-gray-700",children:"A list of all the active benefeciary in the system including their rsbsa number, registration no., fullname, association and livelihood."})]}),e.jsx("div",{className:"mt-4 sm:ml-16 sm:mt-0 sm:flex-none"})]}),e.jsx("div",{className:"mt-8 flow-root",children:e.jsx("div",{className:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 align-middle sm:px-6 lg:px-8",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{scope:"col",className:"py-3 pl-4 pr-3 text-left text-xs font-medium uppercase tracking-wide text-gray-500 sm:pl-0",children:"RSBSA No."}),e.jsx("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wide text-gray-500",children:"Register No."}),e.jsx("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wide text-gray-500",children:"Lastname"}),e.jsx("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wide text-gray-500",children:"Firstname"}),e.jsx("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wide text-gray-500",children:"Middlename"}),e.jsx("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wide text-gray-500",children:"Livelihood/Organization"}),e.jsx("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wide text-gray-500",children:"Status"}),e.jsx("th",{scope:"col",className:"px-3 py-3 text-left text-xs font-medium uppercase tracking-wide text-gray-500",children:"Barangay"}),e.jsx("th",{scope:"col",className:"relative py-3 pl-3 pr-4 sm:pr-0",children:e.jsx("span",{className:"sr-only",children:"Edit"})})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:(o=s==null?void 0:s.data)==null?void 0:o.map(t=>{var i;return e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap py-4 pl-4 pr-3 text-sm font-medium text-gray-900 sm:pl-0",children:t.register_id}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-900",children:t.id}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm uppercase text-gray-900",children:t.lastname}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm uppercase text-gray-900",children:t.firstname}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm uppercase text-gray-900",children:t.middlename}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-900",children:e.jsx("p",{className:"text-gray-500 italic",children:((i=t==null?void 0:t.farm_profile)==null?void 0:i.main_livelihood)??"N/A"})}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-900",children:l===t.id?e.jsx("select",{className:"rounded-md border-gray-300 text-xs focus:border-green-500 focus:ring-green-500",defaultValue:t.status,onChange:a=>j(t,a.target.value),onBlur:()=>c(null),disabled:n,children:n?e.jsxs("div",{className:"flex items-center justify-center py-1",children:[e.jsx(d,{size:"h-4 w-4",color:"text-green-500"}),e.jsx("span",{className:"ml-2",children:"Updating..."})]}):y.map(a=>e.jsx("option",{value:a,children:a},a))}):e.jsx("span",{onClick:()=>c(t.id),className:`inline-flex cursor-pointer items-center rounded-md px-2 py-1 text-xs font-medium ring-1 ring-inset ${t.status==="active"?"bg-green-50 text-green-700 ring-green-600/20":t.status==="inactive"?"bg-yellow-50 text-yellow-700 ring-yellow-600/20":"bg-red-50 text-red-700 ring-red-600/20"}`,children:t.status})}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm uppercase text-gray-900",children:t.barangay}),e.jsx("td",{className:"relative whitespace-nowrap py-4 pl-3 pr-4 text-right text-sm font-medium sm:pr-0",children:e.jsxs(w,{href:`/administrator/profile/${t.id}`,className:"text-indigo-600 hover:text-indigo-900",children:["View Profile",e.jsxs("span",{className:"sr-only",children:[", ",t.rsbsa]})]})})]},t.email)})})]})})})})]})]})}export{C as default};
