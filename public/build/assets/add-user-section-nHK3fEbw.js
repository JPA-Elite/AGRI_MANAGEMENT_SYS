import{r as n,j as e,a as g,s as f}from"./app-CS5zRdaM.js";import{F as x}from"./index-DgBkqR_g.js";import{g as b}from"./user-thunk-C4llpuX9.js";import{y as j,D as v,j as y,Y as w}from"./dialog-CuvzdXUo.js";import{F as N}from"./XMarkIcon-Dc64q85A.js";import"./iconBase-OZXIfRk3.js";import"./use-tab-direction-D2TrH3ei.js";import"./use-server-handoff-complete-DAcjASpI.js";import"./transition-DbWz1XdI.js";function L(){const[p,t]=n.useState(!1),[d,l]=n.useState(!1),[s,r]=n.useState({firstname:"",middlename:"",lastname:"",suffix:"",role:"",email:"",password:"",password2:"",status:"Active"}),i=new URLSearchParams(window.location.search).get("role");n.useEffect(()=>{r({...s,role:i=="verifier"?"Verifier":""})},[]);const[c,m]=n.useState(""),a=o=>{r({...s,[o.target.name]:o.target.value})},h=async o=>{if(o.preventDefault(),s.password!==s.password2){m("Passwords do not match.");return}l(!0);try{const u=await g.post("/api/users",{firstname:s.firstname,middlename:s.middlename,lastname:s.lastname,suffix:s.suffix,role:s.role,email:s.email,password:s.password,password_confirmation:s.password2,status:s.status,brgy:s.brgy});await f.dispatch(b()),l(!1),m(u.data.message),r({firstname:"",middlename:"",lastname:"",suffix:"",role:"",email:"",password:"",password2:"",status:"Active"}),t(!1)}catch{l(!1)}};return e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"mt-5 text-right",children:e.jsxs("button",{type:"button",onClick:()=>t(!0),className:"block rounded-md bg-green-600 px-3 py-2 text-center text-sm font-semibold text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600",children:[e.jsx(x,{"aria-hidden":"true",className:"float-left mr-2 size-5"}),"New User"]})}),e.jsxs(j,{open:p,onClose:t,className:"relative z-40",children:[e.jsx(v,{transition:!0,className:"fixed inset-0 bg-gray-500/75 transition-opacity duration-500 ease-in-out data-[closed]:opacity-0"}),e.jsx("div",{className:"fixed inset-0 overflow-hidden",children:e.jsx("div",{className:"absolute inset-0 overflow-hidden",children:e.jsx("div",{className:"pointer-events-none fixed inset-y-0 right-0 flex max-w-full pl-10",children:e.jsx(y,{transition:!0,className:"pointer-events-auto w-screen max-w-md transform transition duration-500 ease-in-out data-[closed]:translate-x-full sm:duration-700",children:e.jsxs("div",{className:"flex h-full flex-col overflow-y-scroll bg-white py-6 shadow-xl",children:[e.jsx("div",{className:"px-4 sm:px-6",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs(w,{className:"text-base font-semibold text-gray-900",children:[e.jsx(x,{className:"size-5 float-left mr-2"})," ","New Account User"]}),e.jsx("div",{className:"ml-3 flex h-7 items-center",children:e.jsxs("button",{type:"button",onClick:()=>t(!1),className:"relative rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",children:[e.jsx("span",{className:"absolute -inset-2.5"}),e.jsx("span",{className:"sr-only",children:"Close panel"}),e.jsx(N,{"aria-hidden":"true",className:"size-6"})]})})]})}),e.jsx("div",{className:"relative mt-6 flex-1 px-4 sm:px-6",children:e.jsxs("form",{onSubmit:h,children:[e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 gap-5 sm:grid-cols-2 lg:grid-cols-4",children:[e.jsxs("div",{className:"sm:col-span-12",children:[c&&e.jsx("p",{className:"text-red-500",children:c}),e.jsx("hr",{}),e.jsx("h3",{className:"text-base font-medium text-gray-500 pt-3",children:"Personal Information"})]}),e.jsx("div",{className:"sm:col-span-6",children:e.jsx("input",{name:"firstname",type:"text",placeholder:"Firstname",value:s.firstname,onChange:a,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-green-500 focus:border-green-500 sm:text-sm/6"})}),e.jsx("div",{className:"sm:col-span-6",children:e.jsx("input",{name:"middlename",type:"text",placeholder:"Middlename",value:s.middlename,onChange:a,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-green-500 focus:border-green-500 sm:text-sm/6"})}),e.jsx("div",{className:"sm:col-span-6",children:e.jsx("input",{name:"lastname",type:"text",placeholder:"Lastname",value:s.lastname,onChange:a,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-green-500 focus:border-green-500 sm:text-sm/6"})}),e.jsx("div",{className:"sm:col-span-6",children:e.jsxs("select",{name:"suffix",autoComplete:"suffix-name",value:s.suffix,onChange:a,className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pl-3 pr-8 text-base text-gray-900 outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm/6",children:[e.jsx("option",{value:"",disabled:!0,selected:!0,children:"-- Suffix --"}),e.jsx("option",{children:"Jr"}),e.jsx("option",{children:"Sr"}),e.jsx("option",{children:"I"}),e.jsx("option",{children:"II"}),e.jsx("option",{children:"III"})]})}),e.jsx("div",{className:"sm:col-span-12",children:e.jsxs("select",{name:"role",disabled:i=="verifier",value:s.role,onChange:a,className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pl-3 pr-8 text-base text-gray-900 outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm/6",children:[e.jsx("option",{value:"",disabled:!0,selected:!0,children:"-- Select a Role --"}),i=="verifier"&&e.jsx("option",{value:"Verifier",children:"LGU Verifier"}),e.jsx("option",{value:"Encoder",children:"LGU Encoder"}),e.jsx("option",{value:"Admin",children:"LGU Supervisor"})]})}),e.jsxs("select",{id:"brgy",name:"brgy",placeholder:"Barangay",value:s==null?void 0:s.brgy,onChange:a,className:" w-96 appearance-none rounded-md bg-white py-1.5 pl-3 pr-8 text-base text-gray-900 outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm/6",children:[e.jsx("option",{value:"",disabled:!0,selected:!0,children:"-- Select a Barangay --"}),e.jsx("option",{value:"Bairan",children:"Bairan"}),e.jsx("option",{value:"Bagawines",children:"Bagawines"}),e.jsx("option",{value:"Cabulihan",children:"Cabulihan"}),e.jsx("option",{value:"Don Esperidion Villegas",children:"Don Esperidion Villegas"}),e.jsx("option",{value:"Guba",children:"Guba"}),e.jsx("option",{value:"Macapso",children:"Macapso"}),e.jsx("option",{value:"Maglahos",children:"Maglahos"}),e.jsx("option",{value:"Malangsa",children:"Malangsa"}),e.jsx("option",{value:"Molobolo",children:"Molobolo"}),e.jsx("option",{value:"Pinocawan",children:"Pinocawan"}),e.jsx("option",{value:"Poblacion",children:"Poblacion"}),e.jsx("option",{value:"Puan",children:"Puan"}),e.jsx("option",{value:"Tabon",children:"Tabon"}),e.jsx("option",{value:"Tagbino",children:"Tagbino"}),e.jsx("option",{value:"Ulay",children:"Ulay"})]}),e.jsxs("div",{className:"sm:col-span-12",children:[e.jsx("hr",{}),e.jsx("h3",{className:"text-base font-medium text-gray-500 pt-3",children:"Account Information"})]}),e.jsx("div",{className:"sm:col-span-12",children:e.jsx("input",{name:"email",type:"email",placeholder:"Email Address",autoComplete:"email",value:s.email,onChange:a,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-green-500 focus:border-green-500 sm:text-sm/6"})}),e.jsx("div",{className:"sm:col-span-12",children:e.jsx("input",{name:"password",type:"password",placeholder:"Password",autoComplete:"password",value:s.password,onChange:a,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-green-500 focus:border-green-500 sm:text-sm/6"})}),e.jsx("div",{className:"sm:col-span-12",children:e.jsx("input",{id:"password2",name:"password2",type:"password",placeholder:"Confirm Password",autoComplete:"password",value:s.password2,onChange:a,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-green-500 focus:border-green-500 sm:text-sm/6"})}),e.jsxs("div",{className:"sm:col-span-12",children:[e.jsx("input",{name:"status",type:"hidden",value:s.status,className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-green-500 focus:border-green-500 sm:text-sm/6"}),e.jsx("hr",{})]})]})}),e.jsxs("div",{className:"flex shrink-0 justify-end px-4 py-4",children:[e.jsx("button",{type:"button",onClick:()=>t(!1),className:"rounded-md bg-white px-3 py-2 text-sm font-semibold text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 hover:ring-gray-400",children:"Cancel"}),e.jsx("button",{disabled:d,type:"submit",className:"ml-4 inline-flex justify-center rounded-md bg-green-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-500",children:d?"Loading...":"Save"})]})]})})]})})})})})]})]})}export{L as default};
