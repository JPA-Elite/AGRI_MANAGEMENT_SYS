import{c as m,L as n,a as d,M as o,N as h,u as p,r as y,s as f,j as e,x as g}from"./app-CsQBl0No.js";import x from"./layout-CrxTlJKI.js";import{S as j}from"./spinner-C8UO7pbt.js";import"./index-CUPbX4aF.js";import"./iconBase-CpvtJwc0.js";import"./admin-sidenav-sections-B7pXhE7Z.js";import"./dialog-ArFbwTbi.js";import"./use-tab-direction-DsIobwLg.js";import"./use-server-handoff-complete-B-EwfRb9.js";import"./transition-BK6O8DPq.js";import"./XMarkIcon-fv0RYCJP.js";import"./user-thunk-CYCN07O4.js";import"./MagnifyingGlassIcon-C0-4Zio5.js";import"./ChevronDownIcon-B0q6TGjl.js";const u=m("search/searchBeneficiaries",async(r,{dispatch:s})=>{try{s(n(!0));const a=await d.get(`/api/search?query=${r}`);s(o(a.data))}catch(a){s(h(a.message))}finally{s(n(!1))}});function z(){var c;const r=p(t=>t.search)||{results:null,loading:!1,error:null},{results:s,loading:a,error:l}=r,i=new URLSearchParams(window.location.search).get("query");return y.useEffect(()=>{f.dispatch(u(i))},[i]),a?e.jsx(x,{children:e.jsxs("div",{className:"flex items-center justify-center min-h-screen",children:[e.jsx(j,{size:"h-8 w-8",color:"text-green-500"}),e.jsx("span",{className:"ml-2",children:"Loading..."})]})}):e.jsx(x,{children:e.jsxs("div",{className:"px-4 sm:px-6 lg:px-8",children:[e.jsx("div",{className:"sm:flex sm:items-center",children:e.jsxs("div",{className:"sm:flex-auto",children:[e.jsxs("h1",{className:"text-base font-semibold text-gray-900",children:['Search Results for "',i,'"']}),e.jsxs("p",{className:"mt-2 text-sm text-gray-700",children:["Found ",(s==null?void 0:s.total)||0," beneficiaries matching your search"]})]})}),l?e.jsx("div",{className:"mt-8 text-red-600",children:l}):e.jsx("div",{className:"mt-8 flow-root",children:e.jsx("div",{className:"-mx-4 -my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:e.jsx("div",{className:"inline-block min-w-full py-2 align-middle",children:e.jsxs("table",{className:"min-w-full divide-y divide-gray-300",children:[e.jsx("thead",{children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"RSBSA No."}),e.jsx("th",{className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Name"}),e.jsx("th",{className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Barangay"}),e.jsx("th",{className:"px-3 py-3.5 text-left text-sm font-semibold text-gray-900",children:"Status"}),e.jsx("th",{className:"px-3 py-3.5 text-center text-sm font-semibold text-gray-900",children:"Actions"})]})}),e.jsx("tbody",{className:"divide-y divide-gray-200 bg-white",children:(c=s==null?void 0:s.data)==null?void 0:c.map(t=>e.jsxs("tr",{children:[e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-900",children:t.register_id}),e.jsxs("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-900",children:[t.firstname," ",t.middlename," ",t.lastname]}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-900",children:t.barangay}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-gray-900",children:e.jsx("span",{className:`inline-flex rounded-full px-2 text-xs font-semibold leading-5 ${t.status==="active"?"bg-green-100 text-green-800":t.status==="inactive"?"bg-yellow-100 text-yellow-800":"bg-red-100 text-red-800"}`,children:t.status})}),e.jsx("td",{className:"whitespace-nowrap px-3 py-4 text-sm text-center",children:e.jsx(g,{href:`/administrator/profile/${t.id}`,className:"text-indigo-600 hover:text-indigo-900",children:"View Profile"})})]},t.id))})]})})})})]})})}export{z as default};
