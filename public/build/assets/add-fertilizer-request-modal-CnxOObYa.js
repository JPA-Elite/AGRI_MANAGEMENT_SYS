import{c as y,G as m,a as g,H as j,I as p,u as v,r as o,s as f,j as e}from"./app-CDlVvaBC.js";import{S as x}from"./sweetalert2.esm.all-89IKscqO.js";import{g as w}from"./beneficiary-thunk-C8YSUoii.js";import{F as q}from"./general-DOL9TG6R.js";import{F as k}from"./XMarkIcon-DFrk44HQ.js";import{z as N}from"./transition-PLLi1leS.js";import{y as n}from"./dialog-D-2vtU3f.js";const z=y("fertilizer_request/getFertilizerRequests",async(l,{dispatch:s})=>{try{s(m(!0));const a=await g.get("/api/fertilizer-requests");s(j(a.data))}catch(a){s(p(a.message))}finally{s(m(!1))}});function _({isOpen:l,setIsOpen:s}){var d;const{beneficiaries:a,loading:F}=v(t=>t.beneficiary),[r,i]=o.useState({beneficiary_id:"",fertilizer_type:"",quantity:"",requested_date:"",remarks:""});o.useEffect(()=>{l&&f.dispatch(w())},[l]);const h=async t=>{var u,c;t.preventDefault();try{await g.post("/api/fertilizer-requests",r),await f.dispatch(z()),s(!1),i({beneficiary_id:"",fertilizer_type:"",quantity:"",requested_date:"",remarks:""}),await x.fire({title:"Success!",text:"Fertilizer request has been submitted",icon:"success",showConfirmButton:!1,timer:1500})}catch(b){await x.fire({title:"Error!",text:((c=(u=b.response)==null?void 0:u.data)==null?void 0:c.message)||"Failed to submit request",icon:"error",showConfirmButton:!0})}};return e.jsx(N,{show:l,as:o.Fragment,children:e.jsxs(n,{onClose:()=>s(!1),className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(n.Panel,{className:"mx-auto w-full max-w-4xl h-[90vh] rounded-lg bg-white p-6 overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white pb-4 mb-4 border-b",children:[e.jsx(n.Title,{className:"text-xl font-medium",children:"Add Fertilizer Request"}),e.jsx("button",{onClick:()=>s(!1),className:"absolute top-0 right-0",children:e.jsx(k,{className:"h-6 w-6 text-gray-500"})})]}),e.jsxs("form",{onSubmit:h,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Select Beneficiary"}),e.jsxs("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500",value:r.beneficiary_id,onChange:t=>i({...r,beneficiary_id:t.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Beneficiary"}),(d=a==null?void 0:a.data)==null?void 0:d.map(t=>e.jsxs("option",{value:t.id,children:[t.firstname," ",t.lastname," - ",t.register_id]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Fertilizer Type"}),e.jsxs("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500",value:r.fertilizer_type,onChange:t=>i({...r,fertilizer_type:t.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Fertilizer"}),q.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity (Bags)"}),e.jsx("input",{type:"number",min:"1",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500",value:r.quantity,onChange:t=>i({...r,quantity:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requested Date"}),e.jsx("input",{type:"date",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500",value:r.requested_date,onChange:t=>i({...r,requested_date:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Additional Remarks"}),e.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500",value:r.remarks,onChange:t=>i({...r,remarks:t.target.value}),rows:2})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",className:"rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",onClick:()=>s(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white hover:bg-green-500",children:"Submit Request"})]})]})]})})]})})}const D=Object.freeze(Object.defineProperty({__proto__:null,default:_},Symbol.toStringTag,{value:"Module"}));export{_ as A,D as a,z as g};
