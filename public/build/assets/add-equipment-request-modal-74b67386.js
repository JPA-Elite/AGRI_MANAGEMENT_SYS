import{c as b,z as c,a as f,B as y,C as j,u as q,r as n,s as x,j as e}from"./app-52d26154.js";import{S as g}from"./sweetalert2.esm.all-7820e9f9.js";import{g as v}from"./beneficiary-thunk-42eaa9ee.js";import{E as w}from"./general-3006e717.js";import{X as k}from"./XMarkIcon-a3c64812.js";import{z as N}from"./transition-de51ff59.js";import{y as l}from"./dialog-c1b893d6.js";const _=b("equipment_request/getEquipmentRequests",async(i,{dispatch:r})=>{try{r(c(!0));const a=await f.get("/api/equipment-requests");r(y(a.data))}catch(a){r(j(a.message))}finally{r(c(!1))}});function E({isOpen:i,setIsOpen:r}){var d;const{beneficiaries:a,loading:S}=q(t=>t.beneficiary),[s,o]=n.useState({beneficiary_id:"",equipment_type:"",purpose:"",requested_date:"",remarks:""});n.useEffect(()=>{i&&x.dispatch(v())},[i]);const p=async t=>{var u,m;t.preventDefault();try{await f.post("/api/equipment-requests",s),await x.dispatch(_()),r(!1),o({beneficiary_id:"",equipment_type:"",purpose:"",requested_date:"",remarks:""}),await g.fire({title:"Success!",text:"Equipment request has been submitted",icon:"success",showConfirmButton:!1,timer:1500})}catch(h){await g.fire({title:"Error!",text:((m=(u=h.response)==null?void 0:u.data)==null?void 0:m.message)||"Failed to submit request",icon:"error",showConfirmButton:!0})}};return e.jsx(N,{show:i,as:n.Fragment,children:e.jsxs(l,{onClose:()=>r(!1),className:"relative z-50",children:[e.jsx("div",{className:"fixed inset-0 bg-black/30","aria-hidden":"true"}),e.jsx("div",{className:"fixed inset-0 flex items-center justify-center p-4",children:e.jsxs(l.Panel,{className:"mx-auto w-full max-w-4xl h-[90vh] rounded-lg bg-white p-6 overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white pb-4 mb-4 border-b",children:[e.jsx(l.Title,{className:"text-xl font-medium",children:"Add Equipment Request"}),e.jsx("button",{onClick:()=>r(!1),className:"absolute top-0 right-0",children:e.jsx(k,{className:"h-6 w-6 text-gray-500"})})]}),e.jsxs("form",{onSubmit:p,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Select Beneficiary"}),e.jsxs("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500",value:s.beneficiary_id,onChange:t=>o({...s,beneficiary_id:t.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Beneficiary"}),(d=a==null?void 0:a.data)==null?void 0:d.map(t=>e.jsxs("option",{value:t.id,children:[t.firstname," ",t.lastname," - ",t.register_id]},t.id))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Equipment Type"}),e.jsxs("select",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500",value:s.equipment_type,onChange:t=>o({...s,equipment_type:t.target.value}),required:!0,children:[e.jsx("option",{value:"",children:"Select Equipment"}),w.map(t=>e.jsx("option",{value:t,children:t},t))]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Purpose"}),e.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500",value:s.purpose,onChange:t=>o({...s,purpose:t.target.value}),rows:3,required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Requested Date"}),e.jsx("input",{type:"date",className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500",value:s.requested_date,onChange:t=>o({...s,requested_date:t.target.value}),required:!0})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Additional Remarks"}),e.jsx("textarea",{className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-green-500 focus:ring-green-500",value:s.remarks,onChange:t=>o({...s,remarks:t.target.value}),rows:2})]}),e.jsxs("div",{className:"mt-6 flex justify-end gap-3",children:[e.jsx("button",{type:"button",className:"rounded-md border border-gray-300 px-4 py-2 text-sm font-medium text-gray-700 hover:bg-gray-50",onClick:()=>r(!1),children:"Cancel"}),e.jsx("button",{type:"submit",className:"rounded-md bg-green-600 px-4 py-2 text-sm font-medium text-white hover:bg-green-500",children:"Submit Request"})]})]})]})})]})})}const P=Object.freeze(Object.defineProperty({__proto__:null,default:E},Symbol.toStringTag,{value:"Module"}));export{E as A,P as a,_ as g};
