import{r as l,a as b,l as _,u as j,j as a,s as y}from"./app-Cod8W422.js";import{l as w,m as N}from"./index-BaTaEiBm.js";import{s as g}from"./index-DcJd_v42.js";function k({title:i,titleId:o,...d},c){return l.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:c,"aria-labelledby":o},d),i?l.createElement("title",{id:o},i):null,l.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const C=l.forwardRef(k);async function F(i){return await b.post("/api/lgu_profile",i)}async function S(i){return await b.get(`/api/lgu_profile/${i}`)}function E(i){return async function(o,d){return(await F(i)).data}}function A(i){return async function(o,d){const c=await S(i);return o(_.actions.setProfile(c.data)),c.data}}function L({id:i}){var m,x,h,f;const[o,d]=l.useState(!1),{profile:c}=j(e=>e.lgu_profile),[n,u]=l.useState({}),[t,r]=l.useState({city:"",province:"",region:null});console.log("addressaddressaddress",n),l.useEffect(()=>{r(e=>({...e,...c,file:c.logo,lgu_user_id:i}))},[c]),l.useEffect(()=>{g.regions().then(e=>u(s=>({...s,region:e})))},[]),l.useEffect(()=>{t!=null&&t.region_code&&g.provinces(t==null?void 0:t.region_code).then(e=>u(s=>({...s,province:e})))},[t==null?void 0:t.region_code]),l.useEffect(()=>{t!=null&&t.province_code&&g.cities(t==null?void 0:t.province_code).then(e=>u(s=>({...s,cities:e})))},[t==null?void 0:t.province_code]),l.useEffect(()=>{t!=null&&t.city_code&&g.barangays(t==null?void 0:t.city_code).then(e=>u(s=>({...s,barangay:e})))},[t==null?void 0:t.city_code]);async function v(){d(!0);try{const e=new FormData;e.append("lgu_user_id",t.lgu_user_id),e.append("address",t.address),e.append("barangay",t.barangay),e.append("city",t.city),e.append("province",t.province),e.append("region",t.region),e.append("contact",t.contact),e.append("email",t.email),e.append("brgy_code",t.brgy_code),e.append("city_code",t.city_code),e.append("province_code",t.province_code),e.append("region_code",t.region_code),e.append("municipal_agricultural_office",t.municipal_agricultural_office),e.append("logo",t.file),await y.dispatch(E(e)),await y.dispatch(A(t.lgu_user_id)),d(!1)}catch{d(!1)}}return a.jsxs("div",{className:"divide-y divide-gray-200 overflow-hidden rounded-lg bg-white shadow-xl",children:[a.jsx("div",{className:"px-4 py-5 sm:px-6 bg-green-600",children:a.jsxs("div",{className:"flex flex-row",children:[a.jsx(w,{className:"text-white size-6 mr-2"}),a.jsx("h3",{className:"text-base font-medium text-white",children:"Local Government Unit Information"})]})}),a.jsx("div",{className:"px-4 py-5 sm:p-6",children:a.jsxs("div",{className:"grid grid-cols-1 gap-4 sm:grid-cols-2 lg:grid-cols-4",children:[a.jsx("div",{className:"sm:col-span-2",children:a.jsx("div",{className:"overflow-hidden bg-gray-100 shadow sm:rounded-lg",children:a.jsx("div",{className:"px-4 py-5 sm:p-6",children:a.jsx("img",{alt:"",src:t.logo??"",className:"w-full rounded-2xl object-cover"})})})}),a.jsxs("div",{className:"sm:col-span-2",children:[a.jsxs("div",{className:"grid grid-cols-1 gap-2 sm:grid-cols-1 lg:grid-cols-1",children:[a.jsxs("div",{className:"sm:cols-span-6",children:[a.jsx("label",{htmlFor:"region",className:"block text-sm/6 font-medium text-gray-900",children:"Region"}),a.jsxs("select",{name:"region",value:t.region,onChange:e=>{const s=e.target.options[e.target.selectedIndex];r({...t,[e.target.name]:e.target.value,region_code:s.dataset.code})},className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pl-3 pr-8 text-base text-gray-900 outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm/6",children:[a.jsx("option",{value:"",disabled:!0,selected:!0,children:"-- Select a Region --"}),(m=n==null?void 0:n.region)==null?void 0:m.map((e,s)=>a.jsx("option",{"data-code":e.region_code,value:e.region_name,children:e.region_name},s))]})]}),a.jsxs("div",{className:"sm:cols-span-6",children:[a.jsx("label",{htmlFor:"province",className:"block text-sm/6 font-medium text-gray-900",children:"Province"}),a.jsxs("select",{id:"province",name:"province",value:t.province,onChange:e=>{const s=e.target.options[e.target.selectedIndex];r({...t,province:s.value,province_code:s.dataset.code})},className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pl-3 pr-8 text-base text-gray-900 outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm/6",children:[a.jsx("option",{value:"",selected:!0,disabled:!0,children:"-- Select a Province --"}),(x=n==null?void 0:n.province)==null?void 0:x.map((e,s)=>a.jsx("option",{value:e.province_name,"data-code":e.province_code,children:e.province_name},s))]})]}),a.jsxs("div",{className:"sm:cols-span-6",children:[a.jsx("label",{htmlFor:"city",className:"block text-sm/6 font-medium text-gray-900",children:"City/Municipality"}),a.jsxs("select",{id:"city",name:"city",value:t.city,onChange:e=>{const s=e.target.options[e.target.selectedIndex];r({...t,city:s.value,city_code:s.dataset.code})},className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pl-3 pr-8 text-base text-gray-900 outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm/6",children:[a.jsx("option",{value:"",selected:!0,disabled:!0,children:"-- Select a City --"}),(h=n==null?void 0:n.cities)==null?void 0:h.map((e,s)=>a.jsx("option",{value:e.city_name,"data-code":e.city_code,children:e.city_name},s))]})]}),a.jsxs("div",{className:"sm:cols-span-6",children:[a.jsx("label",{className:"block text-sm/6 font-medium text-gray-900",children:"Barangay"}),a.jsxs("select",{id:"barangay",name:"barangay",value:t.barangay,onChange:e=>{const s=e.target.options[e.target.selectedIndex];r({...t,barangay:s.value,brgy_code:s.dataset.code})},className:"col-start-1 row-start-1 w-full appearance-none rounded-md bg-white py-1.5 pl-3 pr-8 text-base text-gray-900 outline-none focus:ring-green-500 focus:border-green-500 sm:text-sm/6",children:[a.jsx("option",{value:"",selected:!0,disabled:!0,children:"-- Select a Barangay --"}),(f=n==null?void 0:n.barangay)==null?void 0:f.map((e,s)=>a.jsx("option",{value:e.brgy_name,"data-code":e.brgy_code,children:e.brgy_name},s))]})]}),a.jsxs("div",{className:"sm:cols-span-6",children:[a.jsx("label",{className:"block text-sm/6 font-medium text-gray-900",children:"Address Details"}),a.jsx("input",{name:"address",onChange:e=>r({...t,[e.target.name]:e.target.value}),value:(t==null?void 0:t.address)??"",type:"text",autoComplete:"given-name",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-green-500 focus:border-green-500 sm:text-sm/6"})]}),a.jsxs("div",{className:"sm:cols-span-6",children:[a.jsx("label",{htmlFor:"contact",className:"block text-sm/6 font-medium text-gray-900",children:"LGU Contact"}),a.jsx("input",{name:"contact",onChange:e=>r({...t,[e.target.name]:e.target.value}),value:(t==null?void 0:t.contact)??"",type:"number",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-green-500 focus:border-green-500 sm:text-sm/6"})]}),a.jsxs("div",{className:"sm:cols-span-6",children:[a.jsx("label",{htmlFor:"Email Address",className:"block text-sm/6 font-medium text-gray-900",children:"LGU Email Address"}),a.jsx("input",{id:"Email Address",name:"email",value:(t==null?void 0:t.email)??"",type:"email",onChange:e=>r({...t,[e.target.name]:e.target.value}),className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-green-500 focus:border-green-500 sm:text-sm/6"})]})]}),a.jsxs("div",{className:"sm:col-span-12 mt-3",children:[a.jsx("label",{htmlFor:"MAO",className:"block text-sm/6 font-medium text-gray-900",children:"City/Municipal Agricultural Office (MAO)"}),a.jsx("input",{id:"MAO",name:"municipal_agricultural_office",value:(t==null?void 0:t.municipal_agricultural_office)??"",onChange:e=>r({...t,[e.target.name]:e.target.value}),type:"text",className:"block w-full rounded-md bg-white px-3 py-1.5 text-base text-gray-900 outline-none placeholder:text-gray-400 focus:ring-green-500 focus:border-green-500 sm:text-sm/6"}),a.jsx("label",{htmlFor:"cover-photo",className:"block text-sm/6 mt-8 font-medium text-gray-900",children:"City/Municipal Logo"}),a.jsx("div",{className:"mt-2 flex justify-center rounded-lg border border-dashed border-gray-900/25 px-6 py-10",children:a.jsxs("div",{className:"text-center",children:[a.jsx(C,{"aria-hidden":"true",className:"mx-auto size-12 text-gray-300"}),a.jsxs("div",{className:"mt-4 flex text-sm/6 text-gray-600",children:[a.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer rounded-md bg-white font-semibold text-indigo-600 focus-within:outline-none focus-within:ring-2 focus-within:ring-indigo-600 focus-within:ring-offset-2 hover:text-indigo-500",children:[a.jsx("span",{children:"Upload a file"}),a.jsx("input",{id:"file-upload",name:"logo",type:"file",onChange:e=>{const s=e.target.files[0];if(s){const p=new FileReader;p.readAsDataURL(s),p.onload=()=>{r({...t,file:s,[e.target.name]:p.result})}}},className:"sr-only"})]}),a.jsx("p",{className:"pl-1",children:"or drag and drop"})]}),a.jsx("p",{className:"text-xs/5 text-gray-600",children:"PNG, JPG, GIF up to 10MB"})]})}),a.jsxs("button",{onClick:v,type:"button",disabled:o,className:"rounded-full bg-green-600 px-3.5 py-2 mt-4 text-sm font-semibold text-white shadow-sm hover:bg-green-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-green-600",children:[a.jsx(N,{className:"float-left mr-2 size-4"}),o?"Loading...":"UPDATE"]})]})]})]})})]})}const M=Object.freeze(Object.defineProperty({__proto__:null,default:L},Symbol.toStringTag,{value:"Module"}));export{L,A as g,M as l};
